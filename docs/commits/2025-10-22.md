feat(auth,csrf,graphql,frontend,ci): secure cookie auth + CSRF; GraphQL mutations; Apollo CSRF; tests; CI; docs

Summary
- Implement secure cookie-based auth with CSRF (double-submit) across REST and GraphQL.
- Add GraphQL Entry mutations wired to services (create, update, delete).
- Wire frontend Apollo to send CSRF for mutations and use GET for queries; Login/Register now use REST with cookies.
- Add meaningful unit and integration tests; backend suite green.
- Create CI workflows for frontend and backend.
- Update documentation (API and Deployment) and environment templates.

-------------------------------------------------------------------------------

Backend Changes

Security & Auth
- backend/src/core/security.py
  - Password hashing switched from bcrypt to pbkdf2_sha256 to avoid backend/length issues in tests.
  - JWT helpers: added iat and jti for refresh tokens to ensure rotation.
  - Cookie helpers: set both access/refresh cookies and added clear helpers for logout flows.

CSRF Middleware
- backend/src/api/middleware/csrf.py
  - Double-submit token enforcement: sets non-httpOnly CSRF cookie for safe methods, validates header on mutating methods.
  - Adjusted cookie domain handling: omit Domain attribute when host doesnâ€™t match (e.g., testserver) to ensure acceptance in tests.

GraphQL
- backend/src/api/graphql/schema.py
  - Mutations: createEntry, updateEntry, deleteEntry wired to services.
  - Query entries_today and health remain intact.

REST Auth
- backend/src/api/rest/v1/auth.py
  - /register and /login set httpOnly cookies for access/refresh.
  - /refresh rotates refresh token and reissues access cookie.
  - /logout clears cookies.

Database/Config
- backend/src/core/config.py
  - Local SQLite for dev by default; dotenv/env via pydantic-settings.
  - Cookie and CSRF config exposed.

Tests
- backend/tests/unit/test_services_entry.py: CRUD/soft-delete validations.
- backend/tests/unit/test_core_security.py: hashing, JWT, TOTP, cookies.
- backend/tests/integration/test_auth_csrf.py: CSRF enforcement for REST and GraphQL; register sets cookies on valid CSRF.
- backend/tests/conftest.py: shared fixtures and test setup.

Requirements
- backend/requirements/base.txt: fastapi, uvicorn, starlette, sqlalchemy, pydantic, pydantic-settings, strawberry-graphql, PyJWT, passlib[bcrypt], pyotp, email-validator, python-dotenv.
- backend/requirements/dev.txt: pytest, pytest-asyncio, pytest-cov, alembic, httpx.
- backend/requirements/prod.txt: psycopg[binary], alembic.
- backend/requirements.txt now points to requirements/dev.txt.

Environment
- backend/.env.example: added ACCESS_COOKIE_NAME and REFRESH_COOKIE_NAME.

-------------------------------------------------------------------------------

Frontend Changes

Apollo & CSRF
- frontend/src/lib/apollo.ts
  - Added setContext link to inject X-CSRF-Token for non-Query operations from hhh_csrf cookie.
  - Configured HttpLink with credentials: 'include' and useGETForQueries: true.

CSRF Utilities
- frontend/src/lib/csrf.ts
  - ensureCsrf() to trigger safe GET and fetch CSRF cookie.
  - csrfHeaders() to produce headers for REST calls.

Auth Forms
- frontend/src/components/auth/LoginForm.tsx, RegisterForm.tsx
  - Call REST endpoints with credentials: 'include' and CSRF header.
  - Simple error handling and navigation.

Build Artifacts
- Remove stale tracked hashed assets under frontend/dist/assets; do not add new hashed bundles.

-------------------------------------------------------------------------------

CI Workflows

- .github/workflows/backend-ci.yml
  - Python 3.11, pip install -r backend/requirements/dev.txt, pytest -q.

- .github/workflows/frontend-ci.yml
  - Node 20, npm ci, lint, build.

-------------------------------------------------------------------------------

Docs & Tracking

- docs/API.md and docs/DEPLOYMENT.md updated for auth, CSRF, and environment behavior.
- docs/WORKSPACE_CHANGES_2025-10-22.md created with full daily change log.
- DailyTasks/2025-10-22.md: daily checklist and notes.

-------------------------------------------------------------------------------

Verification

Backend Tests
- Full backend test suite green (e.g., 16 passed); only warnings (pydantic deprecation, lifespan).
- Integration: CSRF enforced; register sets cookies; GraphQL mutation blocked without CSRF.

Frontend
- Apollo client builds; CSRF header is added for mutations; queries via GET.

Manual Checks (Recommended)
- Start backend: uvicorn backend.main:app --reload --port 8000
- Start frontend: npm run dev
- Hit /api/v1/auth/health to ensure CSRF cookie (hhh_csrf) appears.
- Attempt Register/Login; observe httpOnly cookies set (hhh_at/hhh_rt).
- Run GraphQL:
  - Query health via GET: /graphql?query={health}
  - Attempt mutation POST without CSRF (expect 403), then with CSRF (expect pass of CSRF, resolver may error if data invalid).

-------------------------------------------------------------------------------

Notes
- Pydantic class-based Config deprecation warning remains; functional, can be migrated to ConfigDict later.
- Ensure SECURE_COOKIES and COOKIE_DOMAIN are correctly configured in non-dev environments.

BREAKING CHANGE: none
